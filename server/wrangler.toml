# Cloudflare Workers configuration for BlockchainVibe
# Updated for latest Cloudflare features (2025-12-09)
name = "blockchainvibe-api"
main = "worker.js"
compatibility_date = "2025-12-10"
compatibility_flags = []

# Environment variables
[vars]
NODE_ENV = "production"
JWT_SECRET = "blockchainvibe-jwt-secret-2025-production-key"
GOOGLE_CLIENT_ID = "579208613672-c4pvdarqdnckdai6re7n9nei5svk72st.apps.googleusercontent.com"
GITHUB_CLIENT_ID = "Ov23lisuJwAjEECYLj0y"
TWITTER_CLIENT_ID = "ZTBIVVZpeUIyVm9uaU1iRFhiVnI6MTpjaQ"
DISCORD_CLIENT_ID = "1431187449215717457"
DISCORD_CLIENT_SECRET = "d3QI-oClsHiCTFPumMkQ8OWwAaJ5O8us"

# D1 Database binding (will be created)
[[d1_databases]]
binding = "DB"
database_name = "blockchainvibe-db"
database_id = "4d7784cc-f73a-4d7d-a108-fc283cc21916"

# R2 Bucket binding for file storage
[[r2_buckets]]
bucket_name = "blockchainvibe-assets"
binding = "blockchainvibe_assets"

# Observability – keep in sync with Cloudflare dashboard (Workers → your worker → Settings → Observability)
[observability]
enabled = false
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = true
persist = true
head_sampling_rate = 1